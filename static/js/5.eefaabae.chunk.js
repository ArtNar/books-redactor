(this["webpackJsonpbooks-redactor"]=this["webpackJsonpbooks-redactor"]||[]).push([[5],{106:function(e,t,n){e.exports={loader:"LoadingState_loader__1ZbJg",loader__fallback:"LoadingState_loader__fallback__DtQyG",loader__error:"LoadingState_loader__error__1mVZa"}},107:function(e,t,n){e.exports={list:"List_list__3ccy6",list__title:"List_list__title__3H4UW",list__content:"List_list__content__QIRxz"}},108:function(e,t,n){e.exports={paper:"Paper_paper__eCA8o",paper_elevation_1:"Paper_paper_elevation_1__5De17",paper_color_white:"Paper_paper_color_white__190JZ",paper_padded:"Paper_paper_padded__1c4Gi"}},109:function(e,t,n){e.exports={"list-item":"ListItem_list-item__2CGcQ","list-item__inner":"ListItem_list-item__inner__4inSF"}},110:function(e,t,n){e.exports={"list-cell":"ListItemCell_list-cell__IrV7j","list-cell__label":"ListItemCell_list-cell__label__2y50B"}},111:function(e,t,n){e.exports={select:"Select_select__3UVD7",select__inner:"Select_select__inner__1xIZH",select__label:"Select_select__label__2nvTE"}},112:function(e,t,n){e.exports={orderings:"Orderings_orderings__1ZSrP",orderings__button:"Orderings_orderings__button__KNcF2"}},133:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return $}));var a=n(43),r=n.n(a),c=n(44),l=n(46),o=n(0),i=n.n(o),s=n(1),u=n(87),d=n(62),_=n(14),b=n(8),m=n(106),f=n.n(m),p=Object(b.a)("loader",f.a),v=function(e){var t=e.children,n=e.error,a=e.loading;return i.a.createElement("div",{className:p()},n&&i.a.createElement("div",{className:p("error")},"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438:",i.a.createElement("br",null),n)||a&&i.a.createElement("div",{className:p("fallback")},i.a.createElement(_.a,null))||t)},O=n(39),k=n(13),g=n.n(k),h=n(107),j=n.n(h),E=Object(b.a)("list",j.a),N=function(e){var t=e.children,n=e.className,a=e.title,r=Object(O.a)(e,["children","className","title"]);return i.a.createElement("div",Object.assign({},r,{className:g()(E(),n)}),a&&i.a.createElement("div",{className:E("title")},a),i.a.createElement("ul",{className:E("content")},t))},y=n(108),C=n.n(y),x=Object(b.a)("paper",C.a),S=function(e){var t=e.className,n=e.elevation,a=void 0===n?0:n,r=e.padded,c=e.color,l=Object(O.a)(e,["className","elevation","padded","color"]);return i.a.createElement("div",Object.assign({},l,{className:g()(x({elevation:a,padded:r,color:c}),t)}))},w=n(109),P=n.n(w),L=Object(b.a)("list-item",P.a),I=function(e){var t=e.children,n=(e.className,Object(O.a)(e,["children","className"]));return i.a.createElement(S,{className:L(),elevation:1,color:"white",padded:!0},i.a.createElement("li",Object.assign({},n,{className:L("inner")}),t))},D=n(110),J=n.n(D),A=Object(b.a)("list-cell",J.a),B=function(e){var t=e.children,n=e.label;return i.a.createElement("div",{className:A()},n&&i.a.createElement("span",{className:A("label")},"".concat(n,": ")),i.a.createElement("span",{className:A("value")},t))},F=[{key:"image",render:function(e){var t=e.image;return t?i.a.createElement("img",{src:t,height:"100",alt:""}):null}},{key:"bookName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",render:function(e){return e.bookName}},{key:"authors",label:"\u0410\u0432\u0442\u043e\u0440\u044b",render:function(e){var t=e.authors;return Array.isArray(t)?t.map((function(e){var t=e.surname,n=e.name;return"".concat(t," ").concat(n)})).join(", "):null}},{key:"amountOfPages",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446",render:function(e){return e.amountOfPages}},{key:"publishingHouseName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",render:function(e){return e.publishingHouseName}},{key:"publishYear",label:"\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",render:function(e){return e.publishYear}},{key:"releaseDate",label:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430 \u0432 \u0442\u0438\u0440\u0430\u0436",render:function(e){return e.releaseDate}},{key:"isbn",label:"ISBN",render:function(e){return e.isbn}}],Q=function(e){var t=e.list,n=void 0===t?[]:t,a=e.loading,r=e.emptyMessage,c=void 0===r?"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442...":r,l=e.onEdit,o=e.onDelete,s=function(e){return function(){return l&&l(e)}},_=function(e){return function(){return o&&o(e)}},b=[].concat(Object(u.a)(F),[{key:"edit",render:function(e){var t,n=e.id;return i.a.createElement(d.a,{actions:(t={onEdit:s(n),onDelete:_(n)},[{key:"edit",label:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",onClick:t.onEdit},{key:"delete",label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:t.onDelete}])})}}]);return i.a.createElement(v,{loading:a},n.length?i.a.createElement(N,null,n.map((function(e){return i.a.createElement(I,{key:e.id},b.map((function(t){var n=t.key,a=t.render,r=t.label;return i.a.createElement(B,{key:n,label:r},a(e))})))}))):c)},Z=n(111),H=n.n(Z),Y=Object(b.a)("select",H.a),G=function(e){var t=e.className,n=e.name,a=e.label,r=e.onChange,c=e.value,l=void 0===c?"":c,o=e.options,s=void 0===o?[]:o;return i.a.createElement("div",{className:g()(Y(),t)},a&&i.a.createElement("span",{className:Y("label")},a),i.a.createElement("select",{className:Y("inner"),name:n,value:l,onChange:function(e){var t=e.target.value;r&&r(t)}},s.map((function(e){var t=e.value,n=e.label;return i.a.createElement("option",{key:t,value:t},n)}))))},M=n(48),V=n(112),z=n.n(V),K=Object(b.a)("orderings",z.a),U=function(e){var t=e.options,n=void 0===t?[]:t,a=e.order,r=e.setOrder,c=e.resetOrder,l=e.label,o=void 0===l?"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e ":l;return i.a.createElement("div",{className:K()},i.a.createElement(G,{onChange:function(e){r&&r({order:e})},options:n,label:o,value:a}),c&&i.a.createElement(M.a,{className:K("button"),onClick:c},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))},R=n(66),T=n(67),W=n(113),q=n(69),X=[{label:"-",value:""},{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:"bookName"},{label:"\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",value:"publishYear"}],$=function(){var e,t=Object(s.f)(),n=Object(R.a)(q.a),a=n.data,u=void 0===a?[]:a,_=n.loading,b=n.refetch,m=Object(T.a)(q.a),f=Object(l.a)(m,1)[0],p=function(){var e=Object(s.g)(),t=Object(s.f)(),n=Object(o.useState)(void 0),a=Object(l.a)(n,2),r=a[0],c=a[1],i=function(e){return"?".concat(Object(W.stringify)(e))};return Object(o.useEffect)((function(){var t=Object(W.parse)(e.search,{ignoreQueryPrefix:!0});c(t.order)}),[e]),{order:r,setOrder:function(e){t.push(i(e))},resetOrder:function(){t.push(i({}))}}}(),v=p.order,O=p.setOrder,k=p.resetOrder,g=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443?")){e.next=11;break}return e.prev=2,e.next=5,f(u.filter((function(e){var n=e.id;return t!==n})));case 5:b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(o.useMemo)((function(){return v?u.sort((function(e,t){return e[v]>t[v]?1:-1})):u}),[u,v]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{actions:(e={onCreate:function(){return t.push("/create")}},[{key:"add",label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e",onClick:e.onCreate}])}),h.length?i.a.createElement(U,{options:X,order:v,setOrder:O,resetOrder:k}):null,i.a.createElement(Q,{loading:_,list:h,onEdit:function(e){return t.push("/edit/".concat(e))},onDelete:g}))}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(39),r=n(0),c=n.n(r),l=n(14),o=n(13),i=n.n(o),s=n(8),u=n(64),d=n.n(u),_=Object(s.a)("button",d.a),b=function(e){var t=e.name,n=e.className,r=e.disabled,o=e.children,s=e.type,u=void 0===s?"button":s,d=e.inProgress,b=e.onClick,m=Object(a.a)(e,["name","className","disabled","children","type","inProgress","onClick"]);return c.a.createElement("button",Object.assign({},m,{type:u,className:i()(_({disabled:r}),n),name:t,disabled:r,onClick:b}),c.a.createElement("div",{key:"content",className:_("content")},d?c.a.createElement(l.a,{className:_("spin")}):c.a.createElement("span",{key:"text",className:_("item")},o)))}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(39),r=n(0),c=n.n(r),l=n(48),o=n(8),i=n(65),s=n.n(i),u=Object(o.a)("actions-panel",s.a),d=function(e){var t=e.actions,n=void 0===t?[]:t;return c.a.createElement("div",{className:u()},n.map((function(e){var t=e.key,n=e.label,r=e.onClick,o=Object(a.a)(e,["key","label","onClick"]);return c.a.createElement(l.a,Object.assign({},o,{className:u("button"),key:t,onClick:r}),n)})))}},64:function(e,t,n){e.exports={button:"Button_button__3QF_k",button__content:"Button_button__content__2_NlO",button_disabled:"Button_button_disabled__Fzsch"}},65:function(e,t,n){e.exports={"actions-panel":"ActionsPanel_actions-panel__1JMSO","actions-panel__button":"ActionsPanel_actions-panel__button__2mAKk"}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(43),r=n.n(a),c=n(44),l=n(46),o=n(0),i=function(e){var t=Object(o.useState)(void 0),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(o.useState)(null),u=Object(l.a)(s,2),d=u[0],_=u[1],b=Object(o.useState)(!0),m=Object(l.a)(b,2),f=m[0],p=m[1],v=Object(o.useCallback)(Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(e));case 1:case"end":return t.stop()}}),t)}))),[e]),O=Object(o.useCallback)((function(){v().then((function(e){e&&i(JSON.parse(e))})).catch((function(e){return _(e)})).finally((function(){return p(!1)}))}),[v]);return Object(o.useEffect)((function(){if(!e)throw new Error("You should provide path to data at localStorage");O()}),[e,O]),{data:a,loading:f,errors:d,refetch:O}}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(43),r=n.n(a),c=n(44),l=function(e){return[function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,localStorage.setItem(e,JSON.stringify(n)),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u0435\u0441\u0442\u0430 \u0432 Local Storage");case 7:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}()]}},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="books"}}]);
//# sourceMappingURL=5.eefaabae.chunk.js.map